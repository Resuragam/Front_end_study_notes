## 组件通信

Vue当中的组件通信可以分为以下几类：

* 父子组件通信
* 兄弟组件通信
* 祖孙和后代组件之后通信
* 非关系组件之间的通信

![img](https://static.vue-js.com/85b92400-3aca-11eb-ab90-d9ae814b240d.png)

### 1. 通过Props传递

当父组件与子组件通信时，需要父组件向子组件传递信息时使用。

* 子组件设置`Props`属性接受参数
* 父组件在子组件的标签当中设置字面量来传递值

### 2. 通过$emit传递

当父组件与子组件通信时，子组件向父组件传递参数

* 子组件通过`$emit`设置触发自定义方法
* 父组件绑定监听器获取子组件传递的参数

### 3. ref

父组件通过给子组件取名，获取子组件实例中的数据

* 父组件在使用子组件时使用`ref`取名
* 父组件通过子组件实例对象获取数据

### 4. EventBus

全局事件总线可以实现任意组件之间通信。

* 设置全局事件总线中心`EventBus`
* A组件通过`$emit`绑定自定义事件
* B组件通过`$on`监听自定义事件

### 5. 依赖注入（provide / inject）

这种方式就是Vue的依赖注入，常用于祖孙和后代组件之间的通信，即使在层数很深的情况下，也能保证传递参数。

* 在父组件通过`Provide`钩子传递参数
* 在子组件通过`inject`钩子接受参数

### 6.$parent / $children

- 使用`$parent`可以让组件访问父组件的实例（访问的是上一级父组件的属性和方法）
- 使用`$children`可以让组件访问子组件的实例，但是，`$children`并不能保证顺序，并且访问的数据也不是响应式的。

### 7. Vuex

Vuex可以实现复杂组件关系间的通信，Vuex可以看作一个存储变量的容器。

* `state`用来存放共享变量的地方
* `getter`，可以增加一个`getter`派生状态，(相当于`store`中的计算属性），用来获得共享变量的值
* `mutations`用来存放修改`state`的方法
* `actions`也是用来存放修改state的方法，不过`action`是在`mutations`的基础上进行。常用来做一些异步操作

