## HTTP协议

### 1. GET和POST区别

* 浏览器会对`GET`请求进行缓存，但基本不会对`POST`请求进行缓存。
* `GET`请求是一个幂等请求，不对服务器资源产生影响，而`POST`请求不是一个幂等请求，会对服务器的资源造成影响。
* `GET`请求的参数会放在`URL`的后面，相比较于`POST`请求是不安全的。
* `GET`请求的报文实体为空，而`POST`请求的报文实体存放着向服务器发送的数据信息。
* 浏览器会对`URL`的长度进行限制，所以会影响`GET`请求发送数据的长度，而`POST`请求不会受到影响。
* `POST`请求可以发送更多的数据类型。

### 2. POST和PUT请求的区别

* `PUT`请求是向服务器发送数据信息，修改服务器中的资源信息，但是不会增加服务器的数据种类数量，表示修改数据。
* `POST`请求是向服务器发送数据信息，会创建新的数据，改变服务器中的数据资源，表示创建数据。

### 3. 常见的HTTP请求头和响应头

**Request Header**

* Accept:浏览器能够处理的内容类型

* Accept-Charset:浏览器能够显示的字符集

* Accept-Encoding：浏览器能够处理的压缩编码

* Accept-Language：浏览器当前设置的语言

* Connection：浏览器与服务器之间连接的类型

* Cookie：当前页面设置的任何Cookie

* Host：发出请求的页面所在的域

* Referer：发出请求的页面的URL

* User-Agent：浏览器的用户代理字符串

**Response Header**

- Date：表示消息发送的时间，时间的描述格式由rfc822定义
- server:服务器名称
- Connection：浏览器与服务器之间连接的类型
- Cache-Control：控制HTTP缓存
- content-type:表示后面的文档属于什么MIME类型

常见的 Content-Type 属性值有以下四种：

* **application/x-www-form-urlencoded**：浏览器原生的表单提交方式，这种方式提交的数据会放到请求体中，以`key1=val1&key2=val2`形式发送给服务器进行处理。

* **multipart/form-data**：该种方式也是一个常见的`POST`提交方式，通常表单上传文件时使用该种方式。

* **application/json**：服务器消息主体是序列化后的`JSON`字符串。

* **text/xml**：该种方式主要用来提交`XML`格式的数据。

### 4. HTTP状态码304是多好还是少好

为了提高浏览器访问网站的速率，会对访问的部分页面进行缓存处理。`HTTP`状态码304表示客户端存在缓存文件的使用。

但是搜索引擎的蜘蛛更加青睐内容频繁更新的网站，如果一个页面长期处于304状态中，搜索引擎的蜘蛛会降低抓取次数，导致回访率降低。

**产生304状态码的原因：**

* 页面长期不更新。
* 页面是静态页面。

**304状态码过多的问题：**

* 网站的收录降低。
* 网站的访问率降低，搜索权重下降。

### 5. 常见的HTTP请求方法

* GET：向服务器发送数据。
* POST：向服务器提交数据，会影响服务器资源修改。
* PUT：更新数据。
* DELETE：删除服务器上数据。
* HEAD：获取报文头部信息。
* OPTIONS：预检请求，获取服务器支持的所有请求方法，用来跨域请求。
* TRACH：回显服务器收到的请求，主要⽤于测试或诊断。
* CONNECT：要求在与代理服务器通信时建立隧道，使用隧道进行TCP通信。

### 6. OPTIONS请求方法及使用场景

`OPTIONS`请求是用来获得指定`URI`标识资源的请求/响应的通信过程可以使用的功能选项。

通过这个方法，客户端可以获取到服务器所支持的全部请求方法，了解服务器的性能。

**用途**

* 获取服务器支持的所有`HTTP`请求方法。
* 用来检查访问权限，例如`CORS`跨域资源共享时，当发送复杂请求前，需要先发送一个`OPTIONS`请求判断是否具有访问权限。

### 7. HTTP 1.0 和 HTTP 1.1 之间有哪些区别？

* **持久连接**：`HTTP1.0`默认使用非持久连接，`HTTP 1.1`默认使用持久连接。在一次连接中可以发送多次请求，减少非持久连接所需要的时延。
* **缓存方面**：在`HTTP1.0`中主要使用header中的`If-Modified-Since`、`Expires`作为缓存判断，而`HTTP 1.1`新增了更多的缓存策略。比如说`Etag`，`If-None-Match`等缓存头控制缓存策略。
* **资源请求方面**：可以对服务器请求的资源进行部分请求。`HTTP 1.1`则在请求头引入了 `range `头域，它允许只请求资源的某个部分，即返回码是 206（Partial Content）。
* **新增Host字段**，`Host`请求头指明了请求需要发送的主机名已经端口号。
* `HTTP1.0` 相对于 `HTTP 1.1`还新增了很多**请求方法**，如 `PUT`、`HEAD`、`OPTIONS` 等。

### 8. HTTP 1.1 和 HTTP 2.0 的区别

* **二进制协议**。`HTTP 1.1`的报文头信息必须是文本，而数据体可以是文本，也可以是二进制。`HTTP 2.0`的报文头信息和数据体必须都是二进制，统称为帧，被分为头信息帧和数据帧。
* **多路复用**。`HTTP 2.0`实现了多路复用，在一次`TCP`连接中，可以发送多次请求，但是不需要保证顺序发送，避免了对头阻塞的问题。
* **数据流**。`HTTP 2.0`的数据包不在按照顺序发送，因此对于发送的数据包会进行标记，表明来自哪个请求。每个数据流都有一个独一无二的编号。数据包发送时，都必须标记数据流 ID ，用来区分它属于哪个数据流。
* **头信息压缩**。`HTTP 2.0` 实现了头信息压缩，在请求中许多信息是重复的，比如说`Cookie `，会造成性能的浪费。因此`HTTP 2.0` 引入头信息压缩的方式，客户端与服务端共同维护一张索引表，所有字段存入这张表，之后的信息只需要发送索引即可，提高了速度。
* **服务器推送**。`HTTP 2.0`允许服务器主动向客户端发送请求资源，减少一定的时延。

### 9. HTTP和HTTPS协议的区别

* `HTTP`是超文本传输协议，信息进行明文传输，而`HTTPS`是`HTTP`协议与具有安全性的`TSL`协议的加密传输协议。
* `HTTP`连接的端口是80，而`HTTPS`连接的端口是443。
* `HTTPS`协议需要CA证书，费用较高；而`HTTP`协议不需要。
* `HTTP`的状态连接简单，是无状态的，而`HTTPS`是基于`HTTP`协议与`TSL`协议构建的机密传输，身份认证的网络协议。

### 10. GET方法URL长度限制的原因

实际上`HTTP`协议规范并没有对`get`方法请求的`url`长度进行限制，这个限制是特定的浏览器及服务器对它的限制。 `IE`对`URL`长度的限制是2083字节(2K+35)。由于`IE`浏览器对`URL`长度的允许值是最小的，所以开发过程中，只要`URL`不超过2083字节，那么在所有浏览器中工作都不会有问题。

### 11. 当在浏览器中输入 Google.com 并且按下回车之后发生了什么？

### 12. 对keep-alive的理解

`HTTP1.0`是在每次发送接受请求之后，都需要断开连接，然后建立新的连接，这就是短连接。

而长连接就是在一次`TCP`连接中可以发送多次请求，保证连接长久有效性。

* 在`HTTP1.0`默认使用短连接，如果需要进行长连接，需要在手动配置`Connection: keep-alive`，如果需要断开连接，需发送`Connection:close`字段。
* HTTP1.1规定了默认保持长连接，数据传输完成了保持`TCP`连接不断开，等待在同域名下继续用这个通道传输数据。如果需要关闭，需要客户端发送`Connection：close`首部字段。

**长连接的优点：**

* 减少CPU和内存的使用，连接减少了。
* 降低了拥塞控制。
* 减少了后续请求发送的时延，无需三次握手。
* 允许请求和应答的HTTP管线化。

**长连接的却点：**

* 长连接容易导致系统资源无效被占用，浪费系统资源。

### 13. 页面有多张图片，HTTP是怎样的加载表现？

- 在`HTTP 1`下，浏览器对一个域名下最大`TCP`连接数为6，所以会请求多次。可以用**多域名部署**解决。这样可以提高同时请求的数目，加快页面图片的获取速度。
- 在`HTTP 2`下，可以一瞬间加载出来很多资源，因为，`HTTP2`支持多路复用，可以在一个TCP连接中发送多个`HTTP`请求。

### 14. HTTP2的头部压缩算法是怎样的？

`HTTP2`的头部压缩是`HPACK`算法。在客户端和服务器两端建立“字典”，用索引号表示重复的字符串，采用哈夫曼编码来压缩整数和字符串，可以达到50%~90%的高压缩率。

* 在客户端和服务端建立“首部表”来跟踪存储之前发送的键值对，对于相同的数据，不在通过每次请求和响应发送。
* 首部表在`HTTP/2`的连接存续期内始终存在，由客户端和服务器共同渐进地更新。
* 每个新的首部键值对要么被追加到当前表的末尾，要么替换表中之前的值。

### 15. HTTP请求报文的是什么样的？

`HTTP`请求报文包括请求行，请求头部和请求体。

* 请求行：请求行包括请求方法，请求的`URL`字段，以及版本协议。
* 请求头部：主要由多个头部字段和值组成。
* 请求体：`post` `put`等请求需要携带的数据。

### 16. HTTP响应报文的是什么样的？

`HTTP`响应报文主要由响应行，响应头部和响应体组成。

* 响应⾏：由网络协议版本，状态码和状态码的原因短语组成，例如` HTTP/1.1 200 OK` 。
* 响应头：响应部⾸组成。
* 响应体：服务器响应的数据。

### 17. HTTP协议的优点和缺点

**HTTP的优点：**

* 支持客户端/服务端模式传输数据。
* **简单快速**，只需要请求方法，请求路径即可获取服务器相关数据。
* **灵活**：`HTTP` 允许传输任意类型的数据对象。正在传输的类型由` Content-Type` 加以标记。

**HTTP的缺点：**

* **无状态：**`HTTP`是一个无状态的协议，`HTTP `服务器不会保存关于客户的任何信息。
* **明文传输：** 协议中的报文使用的是文本形式，这就直接暴露给外界，不安全。

### 18. 说一下HTTP 3.0

### 19. HTTP协议的性能怎么样

* 长连接。

* 管道运输。

* 对头阻塞。

  对头阻塞的方案：

  * 同一个域名可以开启多个`TCP`连接，增加任务队列，避免阻塞。
  * 域名分片：将域名分出很多二级域名，它们都指向同样的一台服务器，能够并发的长连接数变多，解决了队头阻塞的问题。

### 20. URL有哪些组成部分

以下面的URL为例：**[www.aspxfans.com:8080/news/index.…](https://link.juejin.cn/?target=http%3A%2F%2Fwww.aspxfans.com%3A8080%2Fnews%2Findex.asp%3FboardID%3D5%26ID%3D24618%26page%3D1%23name)**

**协议部分**：该URL的协议部分为“http：”，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在"HTTP"后面的“//”为分隔符；

**域名部分**：该URL的域名部分为“[www.aspxfans.com”。一个URL中，也可以使用IP地址作为域名使用](https://link.juejin.cn?target=http%3A%2F%2Fwww.aspxfans.com%E2%80%9D%E3%80%82%E4%B8%80%E4%B8%AAURL%E4%B8%AD%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8IP%E5%9C%B0%E5%9D%80%E4%BD%9C%E4%B8%BA%E5%9F%9F%E5%90%8D%E4%BD%BF%E7%94%A8)

**端口部分**：跟在域名后面的是端口，域名和端口之间使用“:”作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口（HTTP协议默认端口是80，HTTPS协议默认端口是443）；

**虚拟目录部分**：从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。虚拟目录也不是一个URL必须的部分。本例中的虚拟目录是“/news/”；

**文件名部分**：从域名后的最后一个“/”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“/”开始到“#”为止，是文件部分，如果没有“？”和“#”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。本例中的文件名是“index.asp”。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名；

**锚部分**：从“#”开始到最后，都是锚部分。本例中的锚部分是“name”。锚部分也不是一个URL必须的部分；

**参数部分**：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。本例中的参数部分为“boardID=5&ID=24618&page=1”。参数可以允许有多个参数，参数与参数之间用“&”作为分隔符。