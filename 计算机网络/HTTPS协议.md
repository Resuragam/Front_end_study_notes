## HTTPS协议

### 1. 什么是HTTPS协议？

超文本传输安全协议是一种通过计算机网络进行安全通信的传输协议。HTTPS通过HTTP进行通信，SSL/TSL加密数据包。HTTPS的主要目的是提供对网站服务器的身份认证，保护交换数据的隐私和完整性。

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10885a9d4d574d7caf3fee1416f623ca~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

HTTP协议是明文传输，信息在传输过程中容易被窃听、篡改和劫持的风险，而协议TLS/SSL具有身份识别验证、信息加密和完整性校验的功能，可以避免上述问题的发生。

### 2. TLS/SSL的工作原理

**TLS/SSL**全称**安全传输层协议**（Transport Layer Security），是一种介于TCP和HTTP之间的安全协议，并且不影响原有的TCP协议和HTTP协议。

TLS/SSL的功能实现主要依赖三类基本算法：**散列函数hash**、**对称加密**、**非对称加密**。

* **散列函数hash**：对信息的完整性进行校验。
* **对称加密**：采用共同协商的密钥进行加密传输。
* **非对称加密**：实现身份认证和密钥协商。

### 3. 数字证书是什么？

数字证书是指首先使用Hash算法对公钥和身份信息进行加密，生成一个信息摘要，然后让CA机构用它的私钥对信息摘要进行加密，形成签名。最后将原始信息和签名绑在一起，被称为数字证书。

当接受方收到签名时，会根据原始信息进行相同的Hash算法生成一个信息摘要，同时利用CA机构的公钥对数字证书中的摘要进行解密，比较两个摘要的不同，从而得知信息是否被篡改。因此浏览器会内置CA机构的证书，确保可靠性。

### 4. HTTPS通信（握手）过程

* 客户端向服务端发送请求，包含客户端可以使用的加密算法，协议号和一个随机数。
* 服务端收到请求后，确认双方的加密算法，并出示服务器的证书，以及服务器生成一个随机数。
* 客户端确认证书有效后，会生成一个新的随机数，并且使用数字证书中的公钥，加密这个随机数发送给服务器，并且提供一个前面所有内容的hash值，给服务器进行检查。
* 服务器使用自己的私钥解密随机数，并且提供前面内容的hash值给服务器进行检查。
* 客户端和服务器根据约定的加密方式使用生成的三个随机数，生成对话密钥，以后都使用这个密钥来加密信息。

### 5. HTTPS的特点

HTTPS的**优点**如下：

* 使用HTTPS可以认证通信双方的用户和服务器，保证数据的发送准确。
* 使用HTTPS可以对信息进行加密传输，身份认证，防止数据在传输的过程被篡改和窃取修改。
* HTTPS可以减少中间人攻击的发生。

HTTPS的**缺点**如下：

* HTTPS需要服务端和客户端进行加密和解密的处理，耗费更多的资源。
* HTTPS需要握手确认双方连接，增加页面加载时间。
* SSL证书是收费的，功能越强大的证书费用越高。
* HTTPS连接服务器端资源占用高很多，支持访客稍多的网站需要投入更大的成本。
* SSL证书需要绑定IP，不能再同一个IP上绑定多个域名。

### 6. **HTTPS**是如何保证安全的？

用对称加密的密钥使用非对称加密的公钥进行加密，然后发送出去，接收方根据私钥进行解密，得到对称加密的密钥，从而保证双方使用对称加密进行沟通。需要⼀个安全的第三⽅颁发证书（CA），证明身份的身份，防⽌被中间⼈攻击。



